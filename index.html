<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Основная информация о подписке и способах подключения">
	<link rel="icon" type="image/x-icon" href="https://google.com/pic.png">
	<title>Marzban Subscription</title>

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Raleway:wght@500;600;700&display=swap" rel="stylesheet">

	<!-- Set the theme at the very beginning, so as not to scare a user with a white screen while loading the page on slow devices -->
	<script type="text/javascript">

		function calculateSettingAsThemeString({ localStorageTheme, systemSettingDark }) {
			if (localStorageTheme !== null) {
		    	return localStorageTheme
		  	}
		   if (systemSettingDark.matches) {
		    	return "dark"
		   }
		   return "light"
		}

		function setTheme(newTheme) {
			document.documentElement.setAttribute('data-bs-theme', newTheme)
			localStorage.setItem("theme", newTheme);
			currentThemeSetting = newTheme;
		}
		
		const localStorageTheme = localStorage.getItem("theme");
		const systemSettingDark = window.matchMedia("(prefers-color-scheme: dark)");
		let currentThemeSetting = calculateSettingAsThemeString({ localStorageTheme, systemSettingDark });

		setTheme(currentThemeSetting)

	</script>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>

	<script>
        const expireDateInit = "{% if not user.expire %}∞{% else %}{% set current_timestamp = now().timestamp() %}{{ user.expire | datetime }}{% endif %}";
        let expireDateVar = expireDateInit.includes("∞") ? "∞" : new Date(expireDateInit).toLocaleString("ru-RU").replace(",", "")
	</script>

	<style>
		:root {
			--bs-body-font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
			--bs-heading-font-family: 'Raleway', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
			--bs-body-bg: #f8f9fa;
			--bs-primary: #0d6efd;
			--bs-border-radius: 12px;
			--bs-text-color: #212529;
			--bs-text-muted: #6c757d;
			--bs-border-color: #dee2e6;
			--bs-card-bg: #ffffff;
			--bs-card-border: #e9ecef;
			--bs-hover-bg: #f1f3f5;
			--bs-shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
			--bs-shadow-md: 0 4px 6px rgba(0,0,0,0.07);
			--bs-shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
			--bs-transition: all 0.2s ease-in-out;
			--bs-line-height: 1.6;
			--bs-letter-spacing: -0.01em;
		}

		html {
			margin: auto;
			max-width: 520px;
			min-width: 300px;
			padding: 0 25px 50px 25px;
			font-family: var(--bs-body-font-family);
		}

		body {
			background-color: var(--bs-body-bg);
			color: var(--bs-text-color);
			line-height: var(--bs-line-height);
			letter-spacing: var(--bs-letter-spacing);
			font-family: var(--bs-body-font-family);
			font-weight: 400;
		}

		.module-title, h3, h6 {
			font-family: var(--bs-heading-font-family);
			font-weight: 700;
			letter-spacing: -0.02em;
		}

		.accordion-button {
			font-family: var(--bs-heading-font-family);
			font-weight: 600;
			letter-spacing: -0.01em;
		}

		.list-group-item {
			font-family: var(--bs-body-font-family);
			font-weight: 500;
			letter-spacing: -0.01em;
		}

		.list-group-item span:first-child {
			font-family: var(--bs-heading-font-family);
			font-weight: 500;
			letter-spacing: -0.01em;
		}

		.instructions-title {
			font-family: var(--bs-heading-font-family);
			font-weight: 600;
			letter-spacing: -0.01em;
		}

		.instructions p {
			font-family: var(--bs-body-font-family);
			font-weight: 400;
			letter-spacing: -0.01em;
		}

		.btn, .btn-link {
			font-family: var(--bs-body-font-family);
			font-weight: 500;
			letter-spacing: -0.01em;
		}

		.form-check-label {
			font-family: var(--bs-body-font-family);
			font-weight: 500;
			letter-spacing: -0.01em;
		}

		#toast {
			font-family: var(--bs-body-font-family);
			font-weight: 500;
			letter-spacing: -0.01em;
		}

		.dot {
			height: 10px;
			width: 10px;
			border-radius: 50%;
			display: inline-block;
			margin-right: 5px;
			box-shadow: var(--bs-shadow-sm);
		}

		.dot-red {
			background-color: #dc3545;
		}

		.dot-green {
			background-color: #198754;
		}

		.dot-yellow {
			background-color: #ffc107;
		}

		.module {
			margin-bottom: 2rem;
		}

		.accordion, 
		.subscription .list-group {
			box-shadow: var(--bs-shadow-md);
			border-radius: var(--bs-border-radius);
			overflow: hidden;
			border: none;
			background-color: var(--bs-card-bg);
			transition: var(--bs-transition);
		}

		.accordion:hover,
		.subscription .list-group:hover {
			box-shadow: var(--bs-shadow-lg);
		}

		.accordion-item {
			border: none;
			margin-bottom: 1rem;
		}

		.accordion-button::before {
			content: '';
			width: 24px;
			height: 24px;
			background-size: contain;
			background-repeat: no-repeat;
			background-position: center;
			opacity: 0.7;
			transition: var(--bs-transition);
		}

		.accordion-button[aria-controls="flush-collapse-apps-ios"]::before {
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M17.05 20.28c-.98.95-2.05.88-3.08.41-1.09-.47-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.41C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.78 1.18-.19 2.31-.89 3.51-.84 1.54.07 2.7.61 3.44 1.57-3.14 1.88-2.29 5.74.64 6.81-.75 2.03-2.07 4.03-3.57 5.65zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z'/%3E%3C/svg%3E");
		}

		.accordion-button[aria-controls="flush-collapse-apps-android"]::before {
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M17.6 9.48l1.84-3.18c.16-.31.04-.69-.26-.85a.637.637 0 0 0-.83.22l-1.88 3.24a11.463 11.463 0 0 0-8.94 0L5.65 5.67a.643.643 0 0 0-.87-.2c-.28.18-.37.54-.21.83L6.4 9.48A10.81 10.81 0 0 0 1 20h22a10.81 10.81 0 0 0-5.4-10.52zM7 15.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm10 0a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z'/%3E%3C/svg%3E");
		}

		.accordion-button[aria-controls="flush-collapse-apps-windows"]::before {
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M3 3h8.5v8.5H3V3zm0 9.5h8.5V21H3v-8.5zM12.5 3H21v8.5h-8.5V3zm0 9.5H21V21h-8.5v-8.5z'/%3E%3C/svg%3E");
		}

		.accordion-button[aria-controls="flush-collapse-apps-macos"]::before {
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z'/%3E%3C/svg%3E");
		}

		.accordion-button[aria-controls="flush-collapse-apps-linux"]::before {
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z'/%3E%3C/svg%3E");
		}

		[data-bs-theme=dark] .accordion-button::before {
			filter: invert(1);
		}

		.accordion-button:not(.collapsed)::before {
			opacity: 1;
		}

		.accordion-body {
			padding: 1.5rem;
		}

		.accordion-body h3 {
			font-size: 1.25rem;
			font-weight: 600;
			margin-bottom: 0.5rem;
			color: var(--bs-text-color);
		}

		.accordion-body > p:first-of-type {
			color: var(--bs-text-muted);
			margin-bottom: 1.5rem;
		}

		.instructions {
			margin-top: 2rem;
			padding: 1.5rem;
			background-color: var(--bs-hover-bg);
			border-radius: var(--bs-border-radius);
			border: 1px solid rgba(0,0,0,0.05);
		}

		[data-bs-theme=dark] .instructions {
			border-color: rgba(255,255,255,0.05);
		}

		.instructions-title {
			margin: 0 0 1.25rem 0;
			font-size: 1.1rem;
			font-weight: 600;
			color: var(--bs-text-color);
			display: flex;
			align-items: center;
			gap: 0.75rem;
		}

		.instructions-title::before {
			content: '';
			width: 20px;
			height: 20px;
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'/%3E%3C/svg%3E");
			background-size: contain;
			background-repeat: no-repeat;
			opacity: 0.7;
		}

		[data-bs-theme=dark] .instructions-title::before {
			filter: invert(1);
		}

		.instructions p {
			margin-bottom: 1rem;
			line-height: var(--bs-line-height);
			color: var(--bs-text-muted);
			display: flex;
			align-items: flex-start;
			gap: 0.75rem;
		}

		.instructions p::before {
			content: '';
			width: 16px;
			height: 16px;
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z'/%3E%3C/svg%3E");
			background-size: contain;
			background-repeat: no-repeat;
			opacity: 0.5;
			margin-top: 0.25rem;
			flex-shrink: 0;
		}

		[data-bs-theme=dark] .instructions p::before {
			filter: invert(1);
		}

		.img-help {
			margin: 0.75rem 0;
			border-radius: 0.5rem;
			box-shadow: var(--bs-shadow-sm);
			transition: var(--bs-transition);
			max-width: 100%;
			height: auto;
		}

		.img-help:hover {
			box-shadow: var(--bs-shadow-md);
			transform: scale(1.01);
		}

		#toast {
			visibility: hidden;
			width: fit-content;
			margin: auto;
			color: #ffffff;
			text-align: center;
			position: fixed;
			z-index: 1050;
			left: 0;
			right: 0;
			top: 45px;
			font-size: 1rem;
			background-color: rgba(0,0,0,0.9);
			padding: 0.75rem 1.5rem;
			border-radius: var(--bs-border-radius);
			backdrop-filter: blur(8px);
			box-shadow: var(--bs-shadow-lg);
		}

		#toast.show {
			visibility: visible;
			animation: fadein 0.3s, fadeout 0.3s 2.7s;
		}

		@keyframes fadein {
			from { top: 0; opacity: 0; }
			to { top: 45px; opacity: 1; }
		}

		@keyframes fadeout {
			from { top: 45px; opacity: 1; }
			to { top: 0; opacity: 0; }
		}

		/* Dark theme */
		[data-bs-theme=dark] {
			--bs-body-bg: #181818;
			--bs-text-color: #e9ecef;
			--bs-text-muted: #adb5bd;
			--bs-card-bg: #282828;
			--bs-hover-bg: rgba(255,255,255,0.05);
			--bs-shadow-sm: 0 2px 4px rgba(0,0,0,0.2);
			--bs-shadow-md: 0 4px 12px rgba(0,0,0,0.3);
			--bs-shadow-lg: 0 8px 24px rgba(0,0,0,0.4);
		}

		[data-bs-theme=dark] .accordion,
		[data-bs-theme=dark] .subscription .list-group {
			background-color: var(--bs-card-bg);
		}

		[data-bs-theme=dark] .accordion-button,
		[data-bs-theme=dark] .list-group-item {
			background-color: var(--bs-card-bg);
			color: var(--bs-text-color);
			border-color: rgba(255,255,255,0.05);
		}

		[data-bs-theme=dark] .accordion-button:not(.collapsed) {
			background-color: var(--bs-primary);
			color: #ffffff;
		}

		[data-bs-theme=dark] .instructions {
			background-color: var(--bs-hover-bg);
		}

		[data-bs-theme=dark] .link,
		[data-bs-theme=dark] .link-dark {
			color: var(--bs-text-color);
		}

		[data-bs-theme=dark] .link:hover,
		[data-bs-theme=dark] .list-group-item:hover {
			background-color: var(--bs-hover-bg);
		}

		[data-bs-theme=dark] svg {
			filter: invert(100%) sepia(10%) saturate(7500%) hue-rotate(198deg) brightness(120%) contrast(108%);
		}

		[data-bs-theme=dark] #toast {
			background-color: rgba(255,255,255,0.9);
			color: var(--bs-text-color);
		}

		/* Form elements */
		.form-check-input:focus {
			box-shadow: none;
			border-color: var(--bs-primary);
		}

		[data-bs-theme=dark] .form-check-input:focus {
			border-color: var(--bs-primary);
		}

		/* Responsive adjustments */
		@media (max-width: 576px) {
			html {
				padding: 0 15px 30px 15px;
			}

			.module-title {
				font-size: 1.25rem;
				margin: 1rem 0;
			}

			.accordion-button,
			.list-group-item {
				padding: 0.75rem 1rem;
			}

			.instructions {
				padding: 1rem;
			}
		}

		.link-dark {
			color: var(--bs-text-color) !important;
			text-decoration: none;
			transition: var(--bs-transition);
		}

		.link-dark:hover {
			color: var(--bs-primary) !important;
		}

		.btn-link {
			color: var(--bs-text-color);
			text-decoration: none;
			transition: var(--bs-transition);
			padding: 0;
		}

		.btn-link:hover {
			color: var(--bs-primary);
		}

		[data-bs-theme=dark] .link-dark,
		[data-bs-theme=dark] .btn-link {
			color: var(--bs-text-color) !important;
		}

		[data-bs-theme=dark] .link-dark:hover,
		[data-bs-theme=dark] .btn-link:hover {
			color: var(--bs-primary) !important;
		}

		.list-group-item-action {
			display: flex;
			align-items: center;
			padding: 1rem 1.25rem;
			transition: var(--bs-transition);
			border: 1px solid transparent;
			background-color: var(--bs-card-bg);
			margin-bottom: 0.5rem;
			border-radius: var(--bs-border-radius) !important;
		}

		.list-group-item-action:hover {
			background-color: var(--bs-hover-bg);
			border-color: var(--bs-primary);
			transform: translateY(-1px);
			box-shadow: var(--bs-shadow-sm);
		}

		.list-group-item-action span {
			font-weight: 500;
			color: var(--bs-text-color);
		}

		.list-group-item-action .link-icon {
			width: 32px;
			height: 32px;
			margin-left: auto;
			opacity: 0.7;
			transition: var(--bs-transition);
			background-color: var(--bs-primary);
			border-radius: 50%;
			padding: 6px;
			display: flex;
			align-items: center;
			justify-content: center;
			position: relative;
		}

		.list-group-item-action .link-icon::after {
			content: '';
			width: 12px;
			height: 12px;
			border-top: 2px solid #ffffff;
			border-right: 2px solid #ffffff;
			transform: rotate(45deg);
			position: absolute;
			right: 10px;
		}

		.list-group-item-action:hover .link-icon {
			opacity: 1;
			transform: translateX(2px);
		}

		[data-bs-theme=dark] .list-group-item-action .link-icon::after {
			border-color: #ffffff;
		}

		/* Стили для разных типов кнопок */
		.list-group-item-action[href*="appstore"],
		.list-group-item-action[href*="play.google.com"] {
			background-color: rgba(0, 122, 255, 0.05);
		}

		.list-group-item-action[href*="appstore"]:hover,
		.list-group-item-action[href*="play.google.com"]:hover {
			background-color: rgba(0, 122, 255, 0.1);
		}

		.list-group-item-action[href*="github.com"] {
			background-color: rgba(36, 41, 46, 0.05);
		}

		.list-group-item-action[href*="github.com"]:hover {
			background-color: rgba(36, 41, 46, 0.1);
		}

		.list-group-item-action[href*="install"],
		.list-group-item-action[href*="import"] {
			background-color: rgba(40, 167, 69, 0.05);
		}

		.list-group-item-action[href*="install"]:hover,
		.list-group-item-action[href*="import"]:hover {
			background-color: rgba(40, 167, 69, 0.1);
		}

		[data-bs-theme=dark] .list-group-item-action[href*="appstore"],
		[data-bs-theme=dark] .list-group-item-action[href*="play.google.com"] {
			background-color: rgba(0, 122, 255, 0.1);
		}

		[data-bs-theme=dark] .list-group-item-action[href*="appstore"]:hover,
		[data-bs-theme=dark] .list-group-item-action[href*="play.google.com"]:hover {
			background-color: rgba(0, 122, 255, 0.15);
		}

		[data-bs-theme=dark] .list-group-item-action[href*="github.com"] {
			background-color: rgba(255, 255, 255, 0.05);
		}

		[data-bs-theme=dark] .list-group-item-action[href*="github.com"]:hover {
			background-color: rgba(255, 255, 255, 0.1);
		}

		[data-bs-theme=dark] .list-group-item-action[href*="install"],
		[data-bs-theme=dark] .list-group-item-action[href*="import"] {
			background-color: rgba(40, 167, 69, 0.1);
		}

		[data-bs-theme=dark] .list-group-item-action[href*="install"]:hover,
		[data-bs-theme=dark] .list-group-item-action[href*="import"]:hover {
			background-color: rgba(40, 167, 69, 0.15);
		}

		/* Улучшенная типографика для основного текста */
		.list-group-item {
			font-size: 0.95rem;
			line-height: var(--bs-line-height);
			color: var(--bs-text-muted);
		}

		.list-group-item span:first-child {
			color: var(--bs-text-color);
			font-weight: 500;
		}

		/* Стили для раздела помощи */
		#accordionHelp .accordion-item {
			border: none;
			margin-bottom: 1rem;
			background-color: var(--bs-card-bg);
			border-radius: var(--bs-border-radius);
			transition: var(--bs-transition);
			overflow: hidden;
			border: 1px solid var(--bs-border-color);
		}

		#accordionHelp .accordion-item:hover {
			transform: translateY(-1px);
		}

		#accordionHelp .accordion-button {
			font-weight: 600;
			font-size: 1.1rem;
			padding: 1.25rem;
			color: var(--bs-text-color);
			background-color: var(--bs-card-bg);
			border-radius: var(--bs-border-radius) !important;
			position: relative;
			overflow: hidden;
			display: flex;
			align-items: center;
			gap: 0.75rem;
		}

		#accordionHelp .accordion-button::before {
			content: '';
			width: 24px;
			height: 24px;
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'/%3E%3C/svg%3E");
			background-size: contain;
			background-repeat: no-repeat;
			opacity: 0.7;
			transition: var(--bs-transition);
			flex-shrink: 0;
		}

		#accordionHelp .accordion-button:not(.collapsed) {
			background-color: var(--bs-primary);
			color: #ffffff;
		}

		#accordionHelp .accordion-button:not(.collapsed)::before {
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'/%3E%3C/svg%3E");
			opacity: 1;
		}

		[data-bs-theme=dark] #accordionHelp .accordion-button::before {
			filter: invert(1);
		}

		[data-bs-theme=dark] #accordionHelp .accordion-button:not(.collapsed)::before {
			filter: none;
		}

		#accordionHelp .accordion-body {
			padding: 1.5rem;
			color: var(--bs-text-muted);
			font-size: 0.95rem;
			line-height: var(--bs-line-height);
			background-color: var(--bs-card-bg);
			border-bottom-left-radius: var(--bs-border-radius);
			border-bottom-right-radius: var(--bs-border-radius);
			position: relative;
		}

		#accordionHelp .accordion-body::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 1px;
			background: var(--bs-border-color);
		}

		[data-bs-theme=dark] #accordionHelp .accordion-item {
			background-color: var(--bs-card-bg);
			border-color: rgba(255,255,255,0.1);
		}

		[data-bs-theme=dark] #accordionHelp .accordion-button {
			background-color: var(--bs-card-bg);
			color: var(--bs-text-color);
		}

		[data-bs-theme=dark] #accordionHelp .accordion-body {
			background-color: var(--bs-card-bg);
			color: var(--bs-text-muted);
		}

		[data-bs-theme=dark] #accordionHelp .accordion-body::before {
			background: rgba(255,255,255,0.1);
		}

		/* Анимации для аккордеона */
		#accordionHelp .accordion-collapse {
			transition: all 0.3s ease-in-out;
		}

		#accordionHelp .accordion-collapse.collapsing {
			transition: all 0.3s ease-in-out;
		}

		/* Улучшенные стили для иконок в разделе помощи */
		#accordionHelp .accordion-button::after {
			transition: transform 0.3s ease-in-out;
		}

		#accordionHelp .accordion-button:not(.collapsed)::after {
			transform: rotate(-180deg);
		}

		/* Стили для текста в разделе помощи */
		#accordionHelp .accordion-body {
			font-size: 0.95rem;
			line-height: 1.7;
			letter-spacing: -0.01em;
		}

		/* Адаптивность для мобильных устройств */
		@media (max-width: 576px) {
			#accordionHelp .accordion-button {
				font-size: 1rem;
				padding: 1rem;
			}

			#accordionHelp .accordion-body {
				padding: 1.25rem;
			}
		}

		/* Новый стиль для пошаговых инструкций */
		.step-list {
			margin: 2rem 0 0 0;
			padding: 0;
			list-style: none;
			position: relative;
		}
		.step-list::before {
			content: '';
			position: absolute;
			left: 18px;
			top: 0;
			bottom: 0;
			width: 4px;
			background: var(--bs-primary);
			opacity: 1;
			z-index: 0;
		}
		.step-list::after {
			content: '';
			position: absolute;
			left: 18px;
			top: calc(100% - 18px);
			bottom: 0;
			width: 4px;
			background: var(--bs-body-bg);
			z-index: 2;
		}
		.step-item:last-child::after {
			content: none;
		}
		.step-item {
			display: flex;
			align-items: flex-start;
			margin-bottom: 2.2rem;
			position: relative;
		}
		.step-item:last-child::after {
			display: none;
		}
		.step-icon {
			width: 36px;
			height: 36px;
			background: var(--bs-primary);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			color: #fff;
			font-size: 1.4rem;
			margin-right: 1.1rem;
			flex-shrink: 0;
			box-shadow: 0 2px 8px rgba(46,196,182,0.08);
			position: relative;
			z-index: 1;
		}
		.step-title {
			font-family: var(--bs-heading-font-family);
			font-weight: 600;
			font-size: 1.08rem;
			margin-bottom: 0.2rem;
			color: var(--bs-text-color);
		}
		.step-desc {
			color: var(--bs-text-muted);
			font-size: 0.98rem;
			margin-bottom: 0.2rem;
		}
		[data-bs-theme=dark] .step-icon {
			background: var(--bs-primary);
			color: #fff;
		}
		[data-bs-theme=dark] .step-list::after {
			background: #181818;
		}
		.user-info-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1.2rem 1.5rem;
			margin-bottom: 2rem;
			background: var(--bs-card-bg);
			border-radius: var(--bs-border-radius);
			padding: 1.2rem 1.2rem 0.7rem 1.2rem;
		}
		.user-info-item {
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			gap: 0.2rem;
		}
		.user-info-icon {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 28px;
			height: 28px;
			border-radius: 8px;
			margin-bottom: 0.2rem;
			font-size: 1.1rem;
		}
		.user-info-blue { background: #1e88e5; color: #fff; }
		.user-info-green { background: #2ecc40; color: #fff; }
		.user-info-red { background: #e53935; color: #fff; }
		.user-info-yellow { background: #ffb300; color: #fff; }
		.user-info-label {
			font-size: 1rem;
			font-weight: 600;
			color: var(--bs-text-color);
			opacity: 0.85;
		}
		.user-info-value {
			font-size: 1.02rem;
			color: var(--bs-text-muted);
			font-weight: 500;
		}
		@media (max-width: 576px) {
			.user-info-grid {
				grid-template-columns: 1fr;
				gap: 1.1rem 0;
				padding: 1rem 0.7rem 0.5rem 0.7rem;
			}
		}
		.user-info-grid.user-info-btns {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1rem 1.2rem;
			background: none;
			padding: 0;
			margin-bottom: 1.2rem;
		}
		@media (max-width: 600px) {
			.user-info-grid.user-info-btns {
				grid-template-columns: 1fr;
				gap: 0.7rem 0;
			}
		}
		.user-info-btn {
			display: flex;
			align-items: center;
			justify-content: flex-start;
			width: 100%;
			background: var(--bs-primary);
			color: #fff;
			border: none;
			border-radius: 12px;
			padding: 0.48rem 0.8rem;
			font-size: 1rem;
			font-weight: 600;
			text-align: left;
			cursor: pointer;
			margin: 0;
			transition: background 0.18s;
			text-decoration: none;
			gap: 0.6rem;
			box-shadow: none;
		}
		.user-info-btn + .user-info-btn {
			margin-top: 0.5rem;
		}
		.user-info-btn-icon {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 24px;
			height: 24px;
			border-radius: 6px;
			background: rgba(255,255,255,0.13);
			margin-right: 0.1rem;
		}
		.user-info-btn-icon svg {
			width: 18px;
			height: 18px;
		}
		.user-info-btn:hover, .user-info-btn:focus {
			background: #1565c0;
			color: #fff;
			text-decoration: none;
		}
		.user-info-btns-vertical {
			grid-template-columns: 1fr !important;
			gap: 0.7rem 0 !important;
		}
		.section-title {
			display: flex;
			align-items: center;
			font-family: var(--bs-heading-font-family);
			font-size: 1.45rem;
			font-weight: 700;
			letter-spacing: -0.01em;
			margin-bottom: 1.2rem;
			margin-top: 2.2rem;
			color: var(--bs-text-color);
			gap: 0.7rem;
			background: var(--bs-card-bg);
			border-radius: 14px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.04);
			padding: 0.7rem 1.2rem 0.7rem 0.9rem;
		}
		.section-title-icon {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 38px;
			height: 38px;
			border-radius: 50%;
			background: var(--bs-primary);
			color: #fff;
			font-size: 1.2rem;
		}
	</style>

	<script type="text/javascript">

		function showNotification(notificationElementId) {
		  	let notification = document.getElementById(notificationElementId)
		    notification.className = "show";
		    setTimeout(() => { 
		    	notification.className = notification.className.replace("show", ""); 
		    }, 2900);
		}
		
		function copyToClipboard(text) {
			navigator.clipboard.writeText(text);
		}

		const buttonSwitchTheme = document.getElementById('btnSwitchTheme');
		buttonSwitchTheme.checked = currentThemeSetting === 'dark';
		buttonSwitchTheme.addEventListener("click", () => {
			  const newTheme = currentThemeSetting === "dark" ? "light" : "dark";
			  setTheme(newTheme);			  
		});

		const links = document.getElementsByClassName('self-link');
		Array.from(links).forEach(link => {
			link.href = link.href.replace('{link}', window.location.href);
		});

	</script>

	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const linkIcons = document.querySelectorAll('.link-icon');
			linkIcons.forEach(icon => {
				icon.innerHTML = '';
			});
		});
	</script>
</head>
<body>

	<!-- <header>
		<h1><img id="logo" src="/www/logo.png">Logo</h1>
	</header> -->

	<main>
		<div class="modules">
			<div class="module subscription">
				<div class="section-title">
					<span class="section-title-icon">
						<svg width="22" height="22" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M10.59 13.41a2 2 0 0 1 0-2.82l2.83-2.83a2 2 0 0 1 2.82 2.83l-1.42 1.41"/><path d="M13.41 10.59a2 2 0 0 1 0 2.82l-2.83 2.83a2 2 0 0 1-2.82-2.83l1.42-1.41"/></svg>
					</span>
					Подключение
				</div>
				<div class="user-info-grid">
					<div class="user-info-item">
						<span class="user-info-icon user-info-red">
							<svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>
						</span>
						<span class="user-info-label">Истекает</span>
						<span class="user-info-value" id="expire"></span>
					    <script>document.getElementById('expire').innerHTML = expireDateVar</script>
					</div>
					<div class="user-info-item">
						<span class="user-info-icon user-info-yellow">
							<svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M16 17l-4 4-4-4M12 12v9"/><path d="M8 7V3m8 4V3"/><rect x="3" y="7" width="18" height="13" rx="2"/></svg>
						</span>
						<span class="user-info-label">Трафик</span>
						<span class="user-info-value">{{ user.used_traffic | bytesformat }} / {% if not user.data_limit %}∞{% else %}{{ user.data_limit | bytesformat }}{% endif %}</span>
					</div>
				</div>
				<div class="user-info-grid user-info-btns user-info-btns-vertical">
					<a class="user-info-btn user-info-btn-support" href="https://t.me/nanix_support_robot" target="_blank" rel="noopener noreferrer">
						<span class="user-info-btn-icon">
							<svg width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><rect x="3" y="5" width="18" height="14" rx="2"/><path d="M7 8h10M7 12h6"/></svg>
						</span>
						Чат поддержки
					</a>
					<button class="user-info-btn user-info-btn-copy" type="button" onclick="copyToClipboard(window.location.href); showNotification('toast');">
						<span class="user-info-btn-icon">
							<svg width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
						</span>
						Скопировать подписку
					</button>
				</div>
				<div id="toast">Подписка скопирована</div>
			</div>

			<div class="module">
				<div class="section-title">
					<span class="section-title-icon">
						<svg width="22" height="22" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M10.59 13.41a2 2 0 0 1 0-2.82l2.83-2.83a2 2 0 0 1 2.82 2.83l-1.42 1.41"/><path d="M13.41 10.59a2 2 0 0 1 0 2.82l-2.83 2.83a2 2 0 0 1-2.82-2.83l1.42-1.41"/></svg>
					</span>
					Приложения
				</div>
				<div class="accordion accordion-flush" id="accordionApps">
					<div class="accordion-item">
					    <h2 class="accordion-header" id="flush-heading-apps-ios">
					    	<button class="accordion-button collapsed lh0" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-apps-ios" aria-expanded="false" aria-controls="flush-collapse-apps-ios">IOS</button>
					    </h2>
					    <div id="flush-collapse-apps-ios" class="accordion-collapse collapse" aria-labelledby="flush-heading-apps-ios" data-bs-parent="#accordionApps">
						     <div class="accordion-body">
							    <h3>HAPP</h3>
							    HAPP - современное приложение для iOS с удобным интерфейсом и поддержкой различных протоколов
								
								<ul class="step-list">
									<li class="step-item">
										<div class="step-icon">1</div>
										<div class="step-content">
											<div class="step-title">Установите и откройте HAPP</div>
											<div class="step-desc">Откройте страницу в App Store и установите приложение. Запустите его, в окне разрешения VPN-конфигурации нажмите Allow и введите свой пароль.</div>
											<a href="https://apps.apple.com/us/app/happ-proxy-utility/id6504287215" target="_blank" class="link list-group-item list-group-item-action">
												<span>Скачать в AppStore</span>
											  	<div class="link-icon"></div>
											</a>
										</div>
									</li>
									<li class="step-item">
										<div class="step-icon">2</div>
										<div class="step-content">
											<div class="step-title">Добавить подписку</div>
											<div class="step-desc">Нажмите кнопку ниже — приложение откроется, и подписка добавится автоматически.</div>
											<a href="happ://add/{link}" target="_blank" class="self-link link list-group-item list-group-item-action">
												<span>Добавить подписку</span>
											  	<div class="link-icon"></div>
											</a>
							    </div>
									</li>
									<li class="step-item">
										<div class="step-icon">3</div>
										<div class="step-content">
											<div class="step-title">Подключите и используйте</div>
											<div class="step-desc">В главном разделе нажмите большую кнопку включения в центре для подключения к VPN. Не забудьте выбрать сервер в списке серверов. При необходимости выберите другой сервер из списка серверов.</div>
							</div>
									</li>
								</ul>							</div>
					    </div>
					 </div>
				  	<div class="accordion-item">
					    <h2 class="accordion-header" id="flush-heading-apps-android">
					    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-apps-android" aria-expanded="false" aria-controls="flush-collapse-apps-android">Android</button>
					    </h2>
					    <div id="flush-collapse-apps-android" class="accordion-collapse collapse" aria-labelledby="flush-heading-apps-android" data-bs-parent="#accordionApps">
					    	<div class="accordion-body">
							    <h3>HAPP</h3>
							    HAPP - современное приложение для Android с удобным интерфейсом и поддержкой различных протоколов

							    <ul class="step-list">
									<li class="step-item">
										<div class="step-icon">1</div>
										<div class="step-content">
											<div class="step-title">Установите и откройте HAPP</div>
											<div class="step-desc">Откройте страницу загрузки и установите приложение. Запустите его.</div>
											<a href="https://play.google.com/store/apps/details?id=com.happproxy" class="link list-group-item list-group-item-action" target="_blank">
										<span>Скачать в Google Play</span>
											  	<div class="link-icon"></div>
											</a>
									    </div>
									</li>
									<li class="step-item">
										<div class="step-icon">2</div>
										<div class="step-content">
											<div class="step-title">Добавить подписку</div>
											<div class="step-desc">Нажмите кнопку ниже — приложение откроется, и подписка добавится автоматически.</div>
											<a href="happ://add/{link}" target="_blank" class="self-link link list-group-item list-group-item-action">
										<span>Добавить подписку</span>
											  	<div class="link-icon"></div>
									</a>
								</div>
									</li>
									<li class="step-item">
										<div class="step-icon">3</div>
										<div class="step-content">
											<div class="step-title">Подключите и используйте</div>
											<div class="step-desc">В главном разделе нажмите большую кнопку включения в центре для подключения к VPN. Не забудьте выбрать сервер в списке серверов. При необходимости выберите другой сервер из списка серверов.</div>
							    </div>
									</li>
								</ul>
							</div>
					    </div>
					 </div>
					 <div class="accordion-item">
					    <h2 class="accordion-header" id="flush-heading-apps-windows">
					    	<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-apps-windows" aria-expanded="false" aria-controls="flush-collapse-apps-windows">Windows</button>
					    </h2>
					    <div id="flush-collapse-apps-windows" class="accordion-collapse collapse" aria-labelledby="flush-heading-apps-windows" data-bs-parent="#accordionApps">
					    	<div class="accordion-body">
							    <h3>HAPP</h3>
							    HAPP - современное приложение для Windows с удобным интерфейсом и поддержкой различных протоколов

							    <ul class="step-list">
									<li class="step-item">
										<div class="step-icon">1</div>
										<div class="step-content">
											<div class="step-title">Установите и откройте HAPP</div>
											<div class="step-desc">Откройте страницу загрузки и установите приложение. Запустите его.</div>
											<a href="https://github.com/Happ-proxy/happ-desktop/releases/latest/download/setup-Happ.x86.exe" target="_blank" class="link list-group-item list-group-item-action">
										<span>Скачать с GitHub</span>
											  	<div class="link-icon"></div>
											</a>
									    </div>
									</li>
									<li class="step-item">
										<div class="step-icon">2</div>
										<div class="step-content">
											<div class="step-title">Добавить подписку</div>
											<div class="step-desc">Нажмите кнопку ниже — приложение откроется, и подписка добавится автоматически.</div>
											<a href="happ://add/{link}" target="_blank" class="self-link link list-group-item list-group-item-action">
												<span>Добавить подписку</span>
											  	<div class="link-icon"></div>
									</a>
								</div>
									</li>
									<li class="step-item">
										<div class="step-icon">3</div>
										<div class="step-content">
											<div class="step-title">Подключите и используйте</div>
											<div class="step-desc">В разделе "Подписки" выберите сервер и нажмите "Подключить". Готово!В главном разделе нажмите большую кнопку включения в центре для подключения к VPN. Не забудьте выбрать сервер в списке серверов. При необходимости выберите другой сервер из списка серверов.</div>
							    </div>
									</li>
								</ul>
							</div>
					    </div>
					 </div>
				</div>
			</div>
			
			<div class="module">
				<div class="section-title">
					<span class="section-title-icon">
						<svg width="22" height="22" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M10.59 13.41a2 2 0 0 1 0-2.82l2.83-2.83a2 2 0 0 1 2.82 2.83l-1.42 1.41"/><path d="M13.41 10.59a2 2 0 0 1 0 2.82l-2.83 2.83a2 2 0 0 1-2.82-2.83l1.42-1.41"/></svg>
					</span>
					Помощь
				</div>
				<div class="accordion accordion-flush" id="accordionHelp">

					<div class="accordion-item">
					    <h2 class="accordion-header" id="flush-heading-help-1">
					    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-help-1" aria-expanded="false" aria-controls="flush-collapse-help-1">Что такое роутинг и для чего он нужен?</button>
					    </h2>
					    <div id="flush-collapse-help-1" class="accordion-collapse collapse" aria-labelledby="flush-heading-help-1" data-bs-parent="#accordionHelp">
						    <div class="accordion-body">
							    Роутинг - правила для перенаправления трафика, они предоставляют гибкую настроку для подключения.
							</div>
					    </div>
					</div>

					<div class="accordion-item">
					    <h2 class="accordion-header" id="flush-heading-help-2">
					    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-help-2" aria-expanded="false" aria-controls="flush-collapse-help-2">Что такое подписка?</button>
					    </h2>
					    <div id="flush-collapse-help-2" class="accordion-collapse collapse" aria-labelledby="flush-heading-help-2" data-bs-parent="#accordionHelp">
						    <div class="accordion-body">
							    Подписка - ссылка в специальном формате, по которой приложение загружает с сервера данные, необходимые для подключения.
							</div>
					    </div>
					</div>

					<div class="accordion-item">
					    <h2 class="accordion-header" id="flush-heading-help-3">
					    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-help-3" aria-expanded="false" aria-controls="flush-collapse-help-3">Хочу использовать другое приложения для подключения</button>
					    </h2>
					    <div id="flush-collapse-help-3" class="accordion-collapse collapse" aria-labelledby="flush-heading-help-3" data-bs-parent="#accordionHelp">
						    <div class="accordion-body">
						    	Напишите нам в чат поддержки, мы поможем Вам настроить приложение. 
							</div>
					    </div>
					</div>
				</div>
			</div>
		</div>
	</main>
	</body>
</html>
